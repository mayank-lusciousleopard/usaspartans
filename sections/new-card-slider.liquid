{{ 'section-multicolumn.css' | asset_url | stylesheet_tag }}
<!-- Slick Slider Assets -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css">

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .ncs-slider-wrapper {
    position: relative;
  }

  .ncs-card {
    overflow: hidden;
    height: 100%;
    display: flex;
    flex-direction: column;
    margin: 0 5px;
    border-radius: 20;
    background: linear-gradient(0deg, rgba(0, 0, 0, 0.04) 0%, rgba(0, 0, 0, 0.04) 100%), #F7F7F7;
}

  .ncs-image-wrapper {
    position: relative;
    padding-top: 75%; /* Aspect ratio matching screenshot */
    width: 100%;
    background: #e1e1e1;
  }

  .ncs-image-wrapper img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ncs-content {
    padding: 15px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }

.ncs-title {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 500;
    color: #000000;
    line-height: 1.3;
    letter-spacing: 0;
}
  
 .ncs-text {
    font-size: 12px;
    color: #000000BF;
    line-height: 1.6;
    margin: 0;
    letter-spacing: 0;
}
  
  .ncs-text p {
    margin: 0;
  }

  /* Slider Controls */
  .ncs-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 30px;
    gap: 20px;
  }

  .ncs-arrow {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    color: #121212;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.2s;
  }
  
  .ncs-arrow:hover {
    opacity: 0.6;
  }
  
  .ncs-arrow svg {
    width: 10px;
    height: 16px;
    display: block;
  }

  .ncs-dots {
    display: flex;
    gap: 0;
  }
  
  /* Slick dots override */
  .ncs-dots .slick-dots {
    position: static;
    display: flex;
    margin: 0;
    padding: 0;
    width: auto;
    gap: 4px;
  }
  
  .ncs-dots .slick-dots li {
    margin: 0;
    width: 10px;
    height: 10px;
  }
  
  .ncs-dots .slick-dots li button {
    width: 10px;
    height: 10px;
    padding: 0;
    border-radius: 50%;
    background-color: #D6D6D6;
  }
  
  .ncs-dots .slick-dots li.slick-active button {
    background-color: #9A9A9A;
  }
  
  .ncs-dots .slick-dots li button:before {
    display: none;
  }
  
  .slick-list {
    margin: 0 -10px; /* Negative margin to offset slide margins */
  }

  /* Equal Height Fix */
  .slick-track {
    display: flex !important;
  }
  
  .slick-slide {
    height: auto;
  }
  .new-card-slider .title-wrapper-with-link {
    display: flex;
    justify-content: center;
    text-align: center;
}
.new-card-slider .title-wrapper-with-link .title {
    font-size: 36px;
    font-family: 'TT Hoves Pro Trial Medium';
    font-weight: 500;
    letter-spacing: 0;
}
{%- endstyle -%}

<div class="new-card-slider section-{{ section.id }}-padding color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    {%- if section.settings.title != blank -%}
      <div class="title-wrapper-with-link title-wrapper--no-top-margin center">
        <h2 class="title {{ section.settings.heading_size }}">
          {{ section.settings.title | escape }}
        </h2>
      </div>
    {%- endif -%}

    <div class="ncs-slider-wrapper">
      <div id="Slider-{{ section.id }}" class="ncs-slider">
        {%- for block in section.blocks -%}
          <div class="ncs-slide-item">
            <div class="ncs-card">
              {%- if block.settings.image != blank -%}
                <div class="ncs-image-wrapper">
                  <img
                    srcset="{{ block.settings.image | image_url: width: 375 }} 375w,
                            {{ block.settings.image | image_url: width: 550 }} 550w,
                            {{ block.settings.image | image_url: width: 750 }} 750w,
                            {{ block.settings.image | image_url: width: 1100 }} 1100w"
                    src="{{ block.settings.image | image_url: width: 550 }}"
                    sizes="(min-width: 1200px) {{ 100 | divided_by: section.settings.columns_desktop }}vw, (min-width: 750px) {{ 100 | divided_by: section.settings.columns_tablet }}vw, 100vw"
                    alt="{{ block.settings.title | escape }}"
                    loading="lazy"
                    width="{{ block.settings.image.width }}"
                    height="{{ block.settings.image.height }}"
                  >
                </div>
              {%- endif -%}
              <div class="ncs-content">
                {%- if block.settings.title != blank -%}
                  <h3 class="ncs-title">{{ block.settings.title | escape }}</h3>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <div class="ncs-text">{{ block.settings.text }}</div>
                {%- endif -%}
              </div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    </div>
    
    <div class="ncs-controls">
        <button class="ncs-arrow ncs-prev-{{ section.id }}" aria-label="Previous">
           <svg xmlns="http://www.w3.org/2000/svg" width="11" height="19" viewBox="0 0 11 19" fill="none">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M0.414757 10.0173L8.42884 18.0313L10.432 16.0282L3.41951 9.01567L10.432 2.00317L8.42884 0L0.414757 8.01408C0.149173 8.27975 -2.38419e-05 8.64002 -2.38419e-05 9.01567C-2.38419e-05 9.39132 0.149173 9.75159 0.414757 10.0173Z" fill="#000000"/>
</svg>
        </button>
        <div class="ncs-dots ncs-dots-{{ section.id }}"></div>
        <button class="ncs-arrow ncs-next-{{ section.id }}" aria-label="Next">
           <svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16" fill="none">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.83875 8.83875L1.7675 15.91L0 14.1425L6.1875 7.955L0 1.7675L1.7675 0L8.83875 7.07125C9.07309 7.30566 9.20473 7.62354 9.20473 7.955C9.20473 8.28646 9.07309 8.60434 8.83875 8.83875Z" fill="black"/>
</svg>
        </button>
    </div>

  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    function initSlick_{{ section.id | replace: '-', '_' }}() {
        // Ensure jQuery and Slick are loaded
        if (typeof jQuery === 'undefined' || typeof jQuery.fn.slick === 'undefined') {
            setTimeout(initSlick_{{ section.id | replace: '-', '_' }}, 100);
            return;
        }
        
        $('#Slider-{{ section.id }}').slick({
            dots: true,
            appendDots: $('.ncs-dots-{{ section.id }}'),
            prevArrow: $('.ncs-prev-{{ section.id }}'),
            nextArrow: $('.ncs-next-{{ section.id }}'),
            arrows: true,
            infinite: true,
            speed: 500,
            slidesToShow: {{ section.settings.columns_desktop }},
            slidesToScroll: 1,
            autoplay: {{ section.settings.autoplay }},
            autoplaySpeed: {{ section.settings.autoplay_speed }} * 1000,
            adaptiveHeight: false,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: {{ section.settings.columns_tablet }},
                        slidesToScroll: 1
                    }
                },
                {
                    breakpoint: 767,
                    settings: {
                        slidesToShow: {{ section.settings.columns_mobile }},
                        slidesToScroll: 1
                    }
                }
            ]
        });
    }
    initSlick_{{ section.id | replace: '-', '_' }}();
  });
</script>

{% schema %}
{
  "name": "New Card Slider",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "Whatâ€™s Included",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" },
        { "value": "hxl", "label": "Extra Large" }
      ],
      "default": "h1",
      "label": "Heading size"
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 4,
      "label": "Columns on Desktop"
    },
    {
      "type": "range",
      "id": "columns_tablet",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 2,
      "label": "Columns on Tablet"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "options": [
        { "value": "1", "label": "1 Column" },
        { "value": "2", "label": "2 Columns" }
      ],
      "default": "1",
      "label": "Columns on Mobile"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 3,
      "unit": "s",
      "label": "Autoplay Speed"
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "default": "Title",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Description text goes here.</p>",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "New Card Slider",
      "blocks": [
        { "type": "column" },
        { "type": "column" },
        { "type": "column" },
        { "type": "column" }
      ]
    }
  ]
}
{% endschema %}